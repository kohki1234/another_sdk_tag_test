<html>

<head>
    <script type="text/javascript">
    !function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["blockEvents","fetchServerCookie","unblockEvents","setSignedMode","setAnonymousMode","resetUUID","addRecord","fetchGlobalID","set","trackEvent","trackPageview","trackClicks","ready", "fetchUserSegments","getCookie", "fetchServerCookie"],n=0;n<s.length;n++){var o=s[n];e[t].prototype[o]=r(o)}var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/2.4/td.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a)}}("Treasure",this); 
        // Configure an instance for your database
        var td = new Treasure({
            host: 'in.treasuredata.com',
            writeKey: '10452/de7bec368253e78d34c4ff6c9d52145a32f117b9',
            database: 'kohki_test',
            // storage : {
            //     name:'_cookie_td',
            //     expires: 0
            //     },
            // logging: true,
            // globalIdCookie: '_td_global_hoge',
            storeConsentByLocalStorage: true
        });
            

        td.set('$global', 'td_global_id', 'td_global_id');
        td.trackPageview('hoge_cookie_test2');

        function buttonClick(){
            console.log('button was clicked')
            var params = {
                td_client_id: 'td_client_id',
                itemId: 101,
                saleId: 10,
                userId: 1,
                button_click: 'button is pressed',
                type: 'td.addRecord'
                };

            // td_client_idなどのデフォルトで計測されるカラムを含めず(指定したレコードのみ計測される)
            td.addRecord('click_events', params);

            // td_client_idなどのデフォルトで計測されるカラムを含めてレコードが記録される
            td.trackEvent('track_events', {
                number: 150000000000,
                type: 'td.trackEvent'
            });

        }
    
    </script>

    <!-- =======================================================
  Start https://cookieconsent.insites.com/ tag
  ======================================================= -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
    <script>
        window.addEventListener("load", function() {
            window.cookieconsent.initialise({
                "palette": {
                    "popup": {
                        "background": "#3c404d",
                        "text": "#d6d6d6"
                    },
                    "button": {
                        "background": "#8bed4f"
                    }
                },
                "type": "opt-out",
                "revokable": true,
                onStatusChange: function(status) {
                    this.hasConsented() ? td.setSignedMode() : td.setAnonymousMode();
                },
            })
        });
    </script>
</head>

<body>

    <!-- <button id="btn" onclick="buttonClick()">表示</button> -->

    <br>
    <a href="https://www.homepage-tukurikata.com/html/a-href.html" id="btn" onclick="buttonClick()">リンク推移</a>

    <br>
    <button id="fakebutton" onclick="buttonClick()">Fake button</button>
</body>

</html>